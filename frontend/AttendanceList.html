<!DOCTYPE html>
<html>
<head>
  <title>Attendance List</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<main class="content">
<table class="section">
<tr>
  <td colspan="5" class="titles">Attendance List</td>
  <td class="action-cell">
    <a href="AttendanceAdd.html" class="button">Add</a>
  </td>
</tr>

<tr>
  <th>ID</th>
  <th>Date</th>
  <th>Status</th>
  <th>Student</th>
  <th>Class</th>
  <th>Action</th>
</tr>

<tbody id="table"></tbody>
</table>
</main>

<script>
fetch("http://localhost:3000/attendance")
.then(r => r.json())
.then(data => {
  table.innerHTML = "";
  data.forEach(a => {
    table.innerHTML += `
      <tr>
        <td>${a.ATTEND_ID}</td>
        <td>${a.ATTEND_DATE}</td>
        <td>${a.ATTEND_STATUS}</td>
        <td>${a.STUDENT_ID}</td>
        <td>${a.CLASS_ID}</td>
        <td>
          <a class="button" href="AttendanceEdit.html?id=${a.ATTEND_ID}">Edit</a>
          <button class="button" onclick="del(${a.ATTEND_ID})">Delete</button>
        </td>
      </tr>
    `;
  });
});

function del(id){
  if(confirm("Delete attendance?")){
    fetch(`http://localhost:3000/attendance/${id}`,{ method:"DELETE" })
    .then(()=>location.reload());
  }
}
</script>

</body>
</html>
